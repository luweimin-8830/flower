{"version":3,"file":"request.js","sources":["utils/request.js"],"sourcesContent":["// 配置常量\r\nconst CLOUD_ENV = 'prod-0gr2o3qpe533f1fb'; // 替换为你的真实环境ID\r\nconst SERVICE_NAME = 'golang-17j9'; // 你的服务名称\r\n\r\n/**\r\n * 通用云托管请求方法\r\n * @param {String} path 请求路径，例如 '/api/user'\r\n * @param {Object} data 请求参数\r\n * @param {String} method 请求方法，默认 POST\r\n */\r\nexport const callContainer = (path, data = {}, method = 'POST') => {\r\n    return new Promise((resolve, reject) => {\r\n        // 自动处理路径，确保以 / 开头\r\n        const formatPath = path.startsWith('/') ? path : `/${path}`;\r\n\r\n        wx.cloud.callContainer({\r\n            config: {\r\n                env: CLOUD_ENV,\r\n            },\r\n            path: formatPath,\r\n            method: method,\r\n            header: {\r\n                'X-WX-SERVICE': SERVICE_NAME,\r\n                'content-type': 'application/json'\r\n            },\r\n            data: data,\r\n            success: (res) => {\r\n                // HTTP 状态码判断\r\n                if (res.statusCode >= 200 && res.statusCode < 300) {\r\n                    // callContainer 返回的数据在 res.data 中\r\n                    resolve(res.data);\r\n                } else {\r\n                    reject(res);\r\n                }\r\n            },\r\n            fail: (err) => {\r\n                console.error(`请求 ${path} 失败`, err);\r\n                reject(err);\r\n            }\r\n        });\r\n    });\r\n};\r\n"],"names":["wx","uni"],"mappings":";;AACA,MAAM,YAAY;AAClB,MAAM,eAAe;AAQT,MAAC,gBAAgB,CAAC,MAAM,OAAO,CAAA,GAAI,SAAS,WAAW;AAC/D,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AAEpC,UAAM,aAAa,KAAK,WAAW,GAAG,IAAI,OAAO,IAAI,IAAI;AAEzDA,kBAAE,KAAC,MAAM,cAAc;AAAA,MACnB,QAAQ;AAAA,QACJ,KAAK;AAAA,MACR;AAAA,MACD,MAAM;AAAA,MACN;AAAA,MACA,QAAQ;AAAA,QACJ,gBAAgB;AAAA,QAChB,gBAAgB;AAAA,MACnB;AAAA,MACD;AAAA,MACA,SAAS,CAAC,QAAQ;AAEd,YAAI,IAAI,cAAc,OAAO,IAAI,aAAa,KAAK;AAE/C,kBAAQ,IAAI,IAAI;AAAA,QACpC,OAAuB;AACH,iBAAO,GAAG;AAAA,QACb;AAAA,MACJ;AAAA,MACD,MAAM,CAAC,QAAQ;AACXC,4BAAA,MAAA,SAAA,0BAAc,MAAM,IAAI,OAAO,GAAG;AAClC,eAAO,GAAG;AAAA,MACb;AAAA,IACb,CAAS;AAAA,EACT,CAAK;AACL;;"}